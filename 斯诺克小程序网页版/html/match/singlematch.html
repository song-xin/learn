<!DOCTYPE html>
<html>
<head>
	<title>赛程</title>
	<meta charset="utf-8">
	<meta content-type="text/html">
	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<style type="text/css">
		.date {
			background-color: #cc0000;/*统一的暗红色*/
			color: #FFFFFF;
			height: 30px;
			line-height: 30px;
			text-align: center;
			padding: 5px 0;
		}
		.sessionhead {
			background-color: #F5F5F5;/*统一灰色*/
			color: #cc0000;
			padding: 5px 0;
		}
		.sessionhead-time {
			margin-left: 45%;
		}
		.sessionhead-round {
			margin-left: 3%;
		}
		.against {
			border-bottom: #F5F5F5 solid 1px;
			padding: 5px 0;
			position: relative;
			height: 28px;
			line-height: 28px;
		}
		.against-no {
			margin-left: 5px;
		}
		.against-p1name {
			margin-left: 5px;
		}
		.against-set {
			position: absolute;
			display: inline;
			height: 28px;
			line-height: 28px;
			width: 8%;
			left: 5%;
			top: 0;
			right: 0;
			bottom: 0;
			margin: auto;
			text-align: center;
		}
		.mid {
			float: left;
			width: 33%;
			text-align: center;
		}
		.against-p2name {
			float: right;
		}
	</style>
</head>
<body>
	<div id="againstDiv">
		
	</div>
</body>
<script type="text/javascript">
$(document).ready(function(){
	var params = location.search;
	var matchId = params.substring(params.indexOf("=")+1);
	$.ajax({
		url:"https://snkdev.top/dev/api/v1/match/schedule?id="+matchId,
		dataType:"json",
		type:"get",
		success:function(data){
			if(data&&data.data&&data.data.length>0){
				$.each(data.data,function(index,data){
					$("#againstDiv").append("<div class='date'>"+data.date+data.day+"</div>");
					$.each(data.sessionList,function(index,session){
						$("#againstDiv").append(
							"<div class='sessionhead'>序号<span class='sessionhead-time'>"+session.time+"</span><span class='sessionhead-round'>"+session.round+"</span></div>");
						$.each(session.againstList,function(index,against){
							$("#againstDiv").append("<div class='against' onclick='openDetail(&quot;"+against.dzid+"&quot;,&quot;"+data.date+"&quot;,&quot;"+session.time+"&quot;)'>"
														+"<span class='against-no'>"+against.no+"</span>"
														+"<span class='against-p1name'>"+against.p1name+"</span>"
														+"<div class='against-set'>"
															+"<div class='mid'>"+against.p1set+"</div>"
															+"<div class='mid'>VS</div>"
															+"<div class='mid'>"+against.p2set+"</div>"
														+"</div>"
														+"<span class='against-p2name'>"+against.p2name+"</span>"
													+"</div>");
						});
					});
				});
			}
		}
	});
	
});
function openDetail(dzid,date,time){
	var url = "detail.html?dzid="+dzid+"&date="+date+" "+time;
	self.location = "detail.html?dzid="+dzid+"&date="+date+" "+time;
}
</script>
</html>